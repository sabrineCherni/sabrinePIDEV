<ui:composition xmlns="http://www.w3.org/1999/xhtml" 
xmlns:f="http://java.sun.com/jsf/core" 
xmlns:c="http://java.sun.com/jsp/jstl/core"
xmlns:h="http://java.sun.com/jsf/html" 
xmlns:ui="http://java.sun.com/jsf/facelets" 
xmlns:p="http://primefaces.org/ui"
template="/template/template.xhtml"> 
<ui:param name="page_name" value="Accueil" /> 
<ui:define name="head"> 
<style type="text/css">
    .animated .ui-progressbar-value { 
        background-image: url("#{resource['demo/images/pbar-ani.gif']}"); 
    }
</style>
 
<script type="text/javascript">
    //<![CDATA[
function start() {
    PF('startButton1').disable();
     
    window['progress'] = setInterval(function() {
var pbClient = PF('pbClient'),
oldValue = pbClient.getValue(),
newValue = oldValue + 10;
         
pbClient.setValue(pbClient.getValue() + 10);
     
if(newValue === 100) {
    clearInterval(window['progress']);
}
 
 
    }, 1000);
}
 
function cancel() {
    clearInterval(window['progress']);
    PF('pbClient').setValue(0);
    PF('startButton1').enable();
}
    //]]>
</script>
</ui:define>
<ui:define name="content"> 
<h:panelGroup> 
<h:form> 
<h:outputText value="Bonjour #{loginBean.employe.prenom} #{loginBean.employe.nom}" /> | 
<h:commandLink value="DÃ©connexion" action="#{loginBean.doLogout()}" /> 
</h:form> 
</h:panelGroup>

<h:panelGroup columns="2"> <h:form> <h:dataTable value="#{tacheBean.getTaches(loginBean.employe.id)}" var="tache" border="1">
<h:column><f:facet name="header"><h:outputText value="title" /></f:facet> <h:outputText value="#{tache.title}" /></h:column>
<h:column><f:facet name="header"><h:outputText value="Status" /></f:facet> <h:outputText value="#{tache.status}" /></h:column>
<h:column><f:facet name="header"><h:outputText value="From" /></f:facet> <h:outputText value="#{tache.from}" /></h:column>
<h:column><f:facet name="header"><h:outputText value="To" /></f:facet> <h:outputText value="#{tache.to}" /></h:column>
<h:column> <f:facet name="header"><h:outputText value="Action" /></f:facet>
<h:commandButton action="#{tacheBean.displayTache(tache)}" value="Afficher" /> </h:column>
</h:dataTable> </h:form> </h:panelGroup>

<h:panelGroup columns="2">

<h:form> 
	<table>
<tr><td><h:outputText value="title Tache"></h:outputText></td>
<td><h:inputText value="#{tacheBean.title}"></h:inputText></td></tr>
<tr><td><h:outputText value="Status"></h:outputText></td> 
<td><h:selectOneMenu value="#{tacheBean.status}"> 
<f:selectItem itemLabel="Choisir Status" itemValue=""/> 
<f:selectItems value="#{data.status}" /> </h:selectOneMenu></td></tr>
<tr><td><h:outputText value="From"></h:outputText></td> 
<td><p:calendar value="#{tacheBean.from}" timeZone="GMT+2" pattern="dd/MM/yyyy HH:mm"/></td></tr>
<tr><td><h:outputText value="To"></h:outputText></td> 
<td><p:calendar value="#{tacheBean.to}" timeZone="GMT+2" pattern="dd/MM/yyyy HH:mm"/></td></tr>
<tr><td><h:commandButton action="#{tacheBean.updateTacheday}" value="Mettre a jour les dates" /></td> </tr>
</table>

 	</h:form>
 	
 </h:panelGroup>
 <h:form> 

    <h:outputText id="txt_count" value="#{chronoBean.res}" />
    <p:poll interval="1" listener="#{chronoBean.increment}" update="txt_count" />


 	
    <p:growl id="growl" />
 
    <h3>Ajax ProgressBar</h3>
    <p:commandButton value="Start" type="button" onclick="PF('pbAjax').start();PF('startButton2').disable();" widgetVar="startButton2" />
    <p:commandButton value="Cancel" action="#{chronoBean.cancel(tacheBean.tacheIdToBeUpdated,tacheBean.title)}" oncomplete="PF('pbAjax').cancel();PF('startButton2').enable();" />
    <br /><br />
    <p:progressBar widgetVar="pbAjax" ajax="true" value="#{chronoBean.progress}" labelTemplate="{value}%" styleClass="animated" global="false">
        <p:ajax event="complete" listener="#{chronoBean.onComplete}" update="growl" oncomplete="PF('startButton2').enable()"/>
    </p:progressBar>
 
    
</h:form>
<h3></h3>
<h:link outcome="/pages/admin/schedule?faces-redirect=true" value="vers les timesheet"/>
<br/>
<h:link outcome="/pages/employes/day?faces-redirect=true" value="vers les day timesheet"/>
<br/>
<h:link outcome="/pages/admin/admintimesheet?faces-redirect=true" value="vers Admin timesheet"/>
<br/>
</ui:define> 
</ui:composition>